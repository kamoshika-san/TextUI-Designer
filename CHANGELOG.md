# Change Log

All notable changes to the "textui-designer" extension will be documented in this file.

Check [Keep a Changelog](http://keepachangelog.com/) for recommendations on how to structure this file.

## [0.1.0] - 2025-06-29

### 🎉 メジャーアップデート - 安定版リリース
- **プロダクション対応**: 172個のテスト全てパス、VS Code Marketplaceリリース準備完了
- **高度な開発体験**: エラー診断・プレビュー最適化により、実用レベルの開発環境を実現

### 🚀 新機能
- **詳細エラー表示システム**: YAML構文エラー・スキーマバリデーションエラーの詳細診断機能
  - 正確な行番号・列番号の表示
  - エラー箇所の前後コードハイライト
  - 具体的な修正提案（TAB文字検出、コロン不足、インデントエラーなど）
  - よくあるYAML構文ミスの自動検出

### 📱 プレビュー体験の大幅改善
- **最適化されたレイアウト**: プレビューを右側、編集画面を左側に自動配置
- **フォーカス管理**: プレビュー表示後も編集画面がアクティブを維持
- **ファイルツリー連携**: 別ファイルを開いてもプレビューが隠れない設計
- **WebView初期化タイミング最適化**: 完全初期化後にフォーカスを戻す仕組み

### 🔧 技術的改善・安定性向上
- **拡張機能初期化エラーの修正**: `extensionRuntime` APIプロポーザル問題を解決
- **グローバル変数によるサービス連携**: `context.globalState`から安全なグローバル変数に変更
- **process.env依存の削除**: Node.js環境変数への依存を除去し、純粋なVS Code拡張として最適化
- **エラー復帰機能**: 壊れたYAMLから正常なYAMLに切り替えた際の確実な復帰機能

### 🐛 重要なバグ修正
- **コマンド実行エラー**: `command 'textui-designer.openPreview' not found`問題の根本解決
- **WebViewManager**: YAMLパースエラー時のキャッシュクリア強化
- **React WebView**: エラー状態の確実なリセット機能
- **TypeScriptコンパイル**: 不完全なコンパイルによる実行エラーを解決

### 📊 品質保証
- **172個のテスト**: 単体・統合・E2Eテスト全てパス
- **手動回帰テスト**: 主要機能の動作確認完了
- **パフォーマンステスト**: メモリ使用量・レンダリング時間の最適化確認

### 🎯 ユーザビリティ向上
- **開発者体験**: エラー診断からプレビューまで、一貫した快適な開発環境
- **学習コスト削減**: 詳細なエラーメッセージによる効率的なデバッグ
- **プロダクション対応**: 実用的なプロジェクトで使用可能な安定性

## [0.0.12-dev]
### 🔧 開発版 - リリース準備
- 拡張機能初期化エラーの修正とテスト
- プレビュー画面のフォーカス改善の実装・テスト
- 詳細エラー表示機能の最終調整

## [0.0.11]
### メモリリーク問題対応
- 診断マネージャーの改善
- 拡張機能のクリーンアップ改善
- メモリ監視の強化
- タイマー管理の改善

## [0.0.10]

### 🔄 ライブプレビュー根本改善
- **ファイル切り替え即座反映**: tui.ymlタブを切り替えた時にライブプレビューが即座に新しいファイルの内容に切り替わるように修正
- **即座更新機能**: ファイル変更時にキャッシュをクリアし、即座にプレビューを更新する機能を追加
- **強制更新システム**: `forceUpdate`パラメータによる強制更新機能で、確実なファイル切り替えを実現

### 🔧 技術的改善
- **setLastTuiFile拡張**: `updatePreview`パラメータを追加し、ファイル変更時の即座更新を制御
- **キャッシュ制御強化**: `forceUpdate`が`true`の場合はキャッシュチェックをスキップして確実に更新
- **アクティブエディタ監視**: ファイル変更の検知精度を向上し、不要な処理を削減

### 🐛 バグ修正
- **タブ切り替え問題**: tui.ymlタブを切り替えてもプレビューが更新されない根本的な問題を解決
- **キャッシュ無効化**: ファイル変更時のキャッシュ無効化処理を確実に実行
- **更新タイミング**: ファイル切り替え時の更新タイミングを最適化

### ⚡ パフォーマンス改善
- **処理効率化**: ファイルが同じ場合の不要な処理を削減
- **即座更新**: ファイル変更時の即座更新により、ユーザー体験を大幅に改善
- **ログ最適化**: デバッグ情報の出力を効率化

### 📊 デバッグ機能
- **ファイル切り替え追跡**: アクティブエディタの変更とファイル切り替えの詳細ログ
- **更新タイミング可視化**: 各更新処理の実行タイミングを明確に記録
- **キャッシュ状態監視**: キャッシュのクリアと使用状況を詳細にログ出力

## [0.0.9]

### 🔄 ライブプレビュー改善
- **ファイル切り替え対応**: tui.ymlファイルを切り替えた時にライブプレビューが正しく更新されるように修正
- **キャッシュ管理の改善**: ファイル切り替え時にキャッシュを適切にクリアし、新しいファイルの内容を確実に反映
- **アクティブエディタ監視**: エディタの切り替えを正確に検知し、プレビューの同期を改善

### 🔧 技術的改善
- **キャッシュクリア機能**: `setLastTuiFile`メソッドでファイル変更時にキャッシュを自動クリア
- **ファイル名比較**: キャッシュチェックでファイル名も考慮し、異なるファイルの場合はキャッシュを使用しない
- **ログ出力の強化**: ファイル切り替えの状況を詳細にログ出力してデバッグを容易に

### 🐛 バグ修正
- **プレビュー同期問題**: 異なるtui.ymlファイル間で切り替えた時にプレビューが更新されない問題を修正
- **キャッシュ無効化**: ファイルが変更された場合のキャッシュ無効化処理を追加

### 📊 デバッグ機能
- **ファイル切り替えログ**: アクティブエディタの変更とファイル切り替えの詳細ログ
- **キャッシュ状態の可視化**: キャッシュのクリアと使用状況をログで確認可能

## [0.0.8]

### 🚀 パフォーマンス改善
- **大量編集時の安定性向上**: コピー＆ペーストによる大量編集時のVSCodeフリーズ問題を解決
- **YAMLパース処理の最適化**: 非同期処理を改善し、UIスレッドのブロッキングを防止
- **メモリ使用量の監視**: リアルタイムメモリ監視と自動クリーンアップ機能を追加
- **デバウンス処理の強化**: より長いデバウンス時間で安定性を向上

### 🔧 技術的改善
- **キュー管理システム**: 更新処理の重複を防止し、処理順序を保証
- **ファイルサイズ制限**: 1MB以上のファイルに対する警告機能を追加
- **変更回数制限**: 1秒あたりの最大変更回数を制限し、過度な処理を防止
- **メモリ制限機能**: 100MB以上でキャッシュ自動クリア、200MB以上で警告表示

### ⚙️ 設定の最適化
- **パフォーマンス設定の調整**: より安全で安定したデフォルト値に変更
- **同時処理数の削減**: 最大同時処理数を2→1に変更して安定性を向上
- **キャッシュTTLの延長**: キャッシュ有効期限を延長してパフォーマンスを向上

### 🐛 バグ修正
- **自動プレビュー設定の不具合**: `autoPreview.enabled = false`でもプレビューが更新される問題を修正
- **メモリリークの防止**: タイマーとキューの適切なクリーンアップ処理を追加
- **エラーハンドリングの改善**: YAMLパースエラー時の適切なエラー表示

### 📊 監視機能の強化
- **パフォーマンスログ**: メモリ使用量と処理時間の詳細ログを追加
- **早期警告システム**: メモリ使用量が大きい場合の自動警告機能
- **処理状態の可視化**: 更新処理の進行状況をログで確認可能

### 🔍 デバッグ機能
- **詳細ログ出力**: 設定値の読み込みと処理フローの詳細ログ
- **メモリ使用量の可視化**: パース前後のメモリ使用量をログで確認
- **処理タイミングの追跡**: 各処理の実行タイミングを詳細に記録

### 📝 ドキュメント
- **パフォーマンス最適化ガイド**: 大量編集時の推奨設定を追加
- **トラブルシューティング**: メモリ不足時の対処法を記載

## [0.0.7]

### 🎨 新機能
- **テーマシステム**: カスタムテーマのサポートを追加
- **リアルタイムテーマ切り替え**: VSCodeテーマ変更時の自動反映
- **CSS変数システム**: テーマ変数の動的適用

### 🔧 改善
- **WebViewパフォーマンス**: レンダリング処理の最適化
- **エラーハンドリング**: より詳細なエラーメッセージ
- **設定管理**: テーマ関連設定の追加

### 🐛 修正
- **メモリリーク**: WebViewパネル閉じ時のリソースクリーンアップ
- **テーマ適用**: 初期テーマ変数の適用タイミング

## [0.0.6]

### 🚀 新機能
- **エクスポート機能**: HTML、React、Pug形式でのエクスポート
- **プレビューからのエクスポート**: WebView内からのワンクリックエクスポート
- **テンプレートシステム**: 再利用可能なコンポーネントテンプレート

### 🔧 改善
- **IntelliSense**: より豊富な補完候補
- **エラーメッセージ**: より分かりやすいエラー表示
- **パフォーマンス**: レンダリング処理の最適化

### 🐛 修正
- **スキーマ検証**: YAML構文エラーの正確な検出
- **WebView更新**: プレビューの同期問題

## [0.0.5]

### 🎯 新機能
- **自動プレビュー**: ファイル保存時の自動プレビュー更新
- **設定システム**: カスタマイズ可能な設定オプション
- **スニペット**: 20以上のテンプレートスニペット

### 🔧 改善
- **WebView管理**: より安定したプレビュー表示
- **エラーハンドリング**: 堅牢なエラー処理
- **ログ出力**: 詳細なデバッグ情報

### 🐛 修正
- **メモリ管理**: リソースの適切な解放
- **設定読み込み**: 設定値の正確な反映

## [0.0.4]

### 🎨 UI改善
- **モダンなデザイン**: Tailwind CSSを使用した美しいUI
- **レスポンシブ対応**: 様々な画面サイズに対応
- **テーマ対応**: ライト/ダークテーマの自動切り替え

### 🔧 機能強化
- **コンポーネント追加**: Alert、Checkbox、Radio、Selectコンポーネント
- **レイアウト改善**: Container、Dividerコンポーネント
- **フォーム機能**: より豊富なフォーム要素

### 🐛 修正
- **レンダリング**: コンポーネントの表示問題
- **スタイル適用**: CSS変数の適用タイミング

## [0.0.3]

### 🚀 新機能
- **WebViewプレビュー**: リアルタイムプレビュー機能
- **JSON Schema検証**: YAML構文の自動検証
- **IntelliSense**: コード補完機能

### 🔧 改善
- **パフォーマンス**: レンダリング処理の最適化
- **エラーハンドリング**: より詳細なエラー表示
- **設定管理**: 拡張機能設定の改善

### 🐛 修正
- **スキーマ読み込み**: スキーマファイルの読み込みエラー
- **WebView通信**: メッセージ送受信の問題

## [0.0.2]

### 🎯 新機能
- **基本コンポーネント**: Text、Button、Input、Formコンポーネント
- **YAML DSL**: 宣言的なUI記述言語
- **VS Code統合**: 拡張機能としての基本機能

### 🔧 改善
- **ファイル監視**: .tui.ymlファイルの自動検出
- **コマンド登録**: プレビュー表示コマンド
- **エラーハンドリング**: 基本的なエラー処理

### 🐛 修正
- **初期化**: 拡張機能の起動問題
- **ファイル処理**: YAMLファイルの読み込みエラー

## [0.0.1]

### 🎉 初回リリース
- **TextUI Designer**: マークダウンに親和性の高いYAML/JSON DSLでUIを設計
- **VS Code拡張**: 即時プレビューと型安全な編集体験
- **基本機能**: プレビュー表示、YAML解析、WebView統合
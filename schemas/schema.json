{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "page": {
      "type": "object",
      "required": ["components"],
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "layout": {
          "type": "string",
          "enum": ["vertical", "horizontal", "flex", "grid"]
        },
        "components": { "$ref": "#/definitions/componentArray" }
      },
      "additionalProperties": false
    }
  },
  "definitions": {
    "componentArray": {
      "type": "array",
      "items": { "$ref": "#/definitions/component" }
    },
    "component": {
      "type": "object",
      "oneOf": [
        { "$ref": "#/definitions/Text" },
        { "$ref": "#/definitions/Alert" },
        { "$ref": "#/definitions/Radio" },
        { "$ref": "#/definitions/Select" },
        { "$ref": "#/definitions/Button" },
        { "$ref": "#/definitions/Checkbox" },
        { "$ref": "#/definitions/Divider" },
        { "$ref": "#/definitions/Container" },
        { "$ref": "#/definitions/Form" },
        { "$ref": "#/definitions/Include" },
        { "$ref": "#/definitions/IfBlock" }
      ]
    },
    "IfBlock": {
      "type": "object",
      "required": ["$if"],
      "properties": {
        "$if": {
          "type": "object",
          "required": ["condition", "template"],
          "properties": {
            "condition": { "type": "string" },
            "template": {
              "type": "array",
              "items": { "$ref": "#/definitions/component" }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "Text": {
      "type": "object",
      "required": ["type", "variant", "value"],
      "properties": {
        "type": { "const": "Text" },
        "variant": {
          "type": "string",
          "enum": ["h1", "h2", "h3", "p", "small", "caption"]
        },
        "value": { "type": "string" }
      },
      "additionalProperties": false
    },
    "Alert": {
      "type": "object",
      "required": ["type", "variant", "message"],
      "properties": {
        "type": { "const": "Alert" },
        "variant": {
          "type": "string",
          "enum": ["info", "success", "warning", "error"]
        },
        "message": { "type": "string" }
      },
      "additionalProperties": false
    },
    "Radio": {
      "type": "object",
      "required": ["type", "label", "name", "options"],
      "properties": {
        "type": { "const": "Radio" },
        "label": { "type": "string" },
        "name": { "type": "string" },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["label", "value"],
            "properties": {
              "label": { "type": "string" },
              "value": { "type": ["string", "number", "boolean"] }
            },
            "additionalProperties": false
          },
          "minItems": 1
        }
      },
      "additionalProperties": false
    },
    "Select": {
      "type": "object",
      "required": ["type", "label", "name", "options"],
      "properties": {
        "type": { "const": "Select" },
        "label": { "type": "string" },
        "name": { "type": "string" },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["label", "value"],
            "properties": {
              "label": { "type": "string" },
              "value": { "type": ["string", "number", "boolean"] }
            },
            "additionalProperties": false
          },
          "minItems": 1
        },
        "multiple": { "type": "boolean", "default": false },
        "placeholder": { "type": "string" }
      },
      "additionalProperties": false
    },
    "Button": {
      "type": "object",
      "required": ["type", "label"],
      "properties": {
        "type": { "const": "Button" },
        "kind": {
          "type": "string",
          "enum": ["primary", "secondary", "submit"],
          "default": "primary"
        },
        "label": { "type": "string" },
        "submit": { "type": "boolean", "default": false }
      },
      "additionalProperties": false
    },
    "Checkbox": {
      "type": "object",
      "required": ["type", "label", "name"],
      "properties": {
        "type": { "const": "Checkbox" },
        "label": { "type": "string" },
        "name": { "type": "string" },
        "required": { "type": "boolean", "default": false }
      },
      "additionalProperties": false
    },
    "Divider": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": { "const": "Divider" },
        "orientation": {
          "type": "string",
          "enum": ["horizontal", "vertical"],
          "default": "horizontal"
        }
      },
      "additionalProperties": false
    },
    "Container": {
      "type": "object",
      "required": ["type", "components"],
      "properties": {
        "type": { "const": "Container" },
        "layout": {
          "type": "string",
          "enum": ["vertical", "horizontal", "flex", "grid"]
        },
        "components": { "$ref": "#/definitions/componentArray" }
      },
      "additionalProperties": false
    },
    "Form": {
      "type": "object",
      "required": ["type", "fields"],
      "properties": {
        "type": { "const": "Form" },
        "id": { "type": "string" },
        "fields": { "$ref": "#/definitions/componentArray" },
        "actions": {
          "type": "array",
          "items": { "$ref": "#/definitions/Button" }
        }
      },
      "additionalProperties": false
    },
    "Include": {
      "type": "object",
      "required": ["type", "template"],
      "properties": {
        "type": { "const": "Include" },
        "template": { "type": "string" },
        "params": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
  